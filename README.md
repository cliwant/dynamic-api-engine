# Prompt API Engine

MySQL í…Œì´ë¸” í–‰ ì¶”ê°€/ìˆ˜ì •ë§Œìœ¼ë¡œ APIë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” **ë™ì  API ì—”ì§„**ì…ë‹ˆë‹¤.

## ğŸ¯ í•µì‹¬ ì»¨ì…‰

- **ì½”ë“œ ë°°í¬ ì—†ì´ API ìƒì„±**: DBì— í–‰ì„ ì¶”ê°€í•˜ë©´ ì¦‰ì‹œ ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ í™œì„±í™”
- **ë‹¤ì¤‘ ë°ì´í„°ì†ŒìŠ¤ ì§€ì›**: MySQL, BigQuery, OpenSearch ë“± ë‹¤ì–‘í•œ ë°ì´í„°ì†ŒìŠ¤
- **ë³µì¡í•œ ì¿¼ë¦¬ ì§€ì›**: ë‹¤ì¤‘ ì¿¼ë¦¬, íŒŒì´í”„ë¼ì¸ ì²˜ë¦¬
- **ë²„ì „ ê´€ë¦¬**: ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ ë²„ì „ìœ¼ë¡œ ê´€ë¦¬, ì–¸ì œë“  ë¡¤ë°± ê°€ëŠ¥
- **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ë³€ê²½ ì´ë ¥ì„ ìë™ ê¸°ë¡
- **ë³´ì•ˆ**: SQL Injection ë°©ì§€, Soft Delete, API í‚¤ ì¸ì¦
- **ğŸ§  AI ê¸°ëŠ¥**: LLM ê¸°ë°˜ API ìƒì„±, SQL ìµœì í™”, í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„±, ìì—°ì–´ API í˜¸ì¶œ

---

## âš™ï¸ ì‹œìŠ¤í…œ ë™ì‘ ë°©ì‹

### ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ ìš”ì²­                                  â”‚
â”‚                    GET /api/users/list?limit=10                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Universal Router                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. ìš”ì²­ ê²½ë¡œ(/api/users/list)ì™€ ë©”ì„œë“œ(GET)ë¡œ API ë©”íƒ€ë°ì´í„° ì¡°íšŒ    â”‚   â”‚
â”‚  â”‚ 2. APP_API_ROUTE_L í…Œì´ë¸”ì—ì„œ ë§¤ì¹­ë˜ëŠ” ë¼ìš°íŠ¸ ê²€ìƒ‰                   â”‚   â”‚
â”‚  â”‚ 3. USE_YN='Y', DEL_YN='N' ì¡°ê±´ìœ¼ë¡œ í™œì„± APIë§Œ ì²˜ë¦¬                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Version Resolver                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ APP_API_VERSION_H í…Œì´ë¸”ì—ì„œ í˜„ì¬ ë²„ì „(CRNT_YN='Y') ë¡œì§ ì¡°íšŒ        â”‚   â”‚
â”‚  â”‚ â†’ LOGIC_TYPE, LOGIC_BODY, REQ_SPEC, RESP_SPEC íšë“                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Validator Service                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ REQ_SPEC ê¸°ë°˜ìœ¼ë¡œ ì…ë ¥ íŒŒë¼ë¯¸í„° ê²€ì¦                                 â”‚   â”‚
â”‚  â”‚ - í•„ìˆ˜ê°’ ì²´í¬ (required: true)                                       â”‚   â”‚
â”‚  â”‚ - íƒ€ì… ê²€ì¦ (string, int, float, bool, list)                        â”‚   â”‚
â”‚  â”‚ - ê¸°ë³¸ê°’ ì ìš© (default)                                              â”‚   â”‚
â”‚  â”‚ - SQL Injection ìœ„í—˜ íŒ¨í„´ ê²€ì‚¬                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Executor Service                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LOGIC_TYPEì— ë”°ë¼ ì ì ˆí•œ ì‹¤í–‰ê¸° ì„ íƒ:                                â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  SQL          â†’ MySQL ì¿¼ë¦¬ ì‹¤í–‰ (íŒŒë¼ë¯¸í„° ë°”ì¸ë”©)                    â”‚   â”‚
â”‚  â”‚  MULTI_SQL    â†’ ë‹¤ì¤‘ ì¿¼ë¦¬ ìˆœì°¨ ì‹¤í–‰                                  â”‚   â”‚
â”‚  â”‚  PIPELINE     â†’ ì—¬ëŸ¬ ìŠ¤í… ì—°ê²° ì‹¤í–‰                                  â”‚   â”‚
â”‚  â”‚  BIGQUERY     â†’ Google BigQuery ì¿¼ë¦¬                                 â”‚   â”‚
â”‚  â”‚  OPENSEARCH   â†’ OpenSearch ê²€ìƒ‰                                      â”‚   â”‚
â”‚  â”‚  HTTP_CALL    â†’ ì™¸ë¶€ API í˜¸ì¶œ                                        â”‚   â”‚
â”‚  â”‚  PYTHON_EXPR  â†’ Python í‘œí˜„ì‹ ì‹¤í–‰ (ì œí•œì )                          â”‚   â”‚
â”‚  â”‚  STATIC       â†’ ì •ì  JSON ë°˜í™˜                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Response Mapper                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ RESP_SPECì— ë”°ë¼ ì‘ë‹µ í˜•ì‹ ë³€í™˜                                      â”‚   â”‚
â”‚  â”‚ - í•„ë“œëª… ë§¤í•‘                                                         â”‚   â”‚
â”‚  â”‚ - ë°ì´í„° íƒ€ì… ë³€í™˜ (datetime â†’ ISO string)                           â”‚   â”‚
â”‚  â”‚ - ì¤‘ì²© êµ¬ì¡° ì²˜ë¦¬                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              JSON ì‘ë‹µ ë°˜í™˜                                  â”‚
â”‚                    {"data": [...], "count": 10}                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 1ï¸âƒ£ API ìš”ì²­ ì²˜ë¦¬ íë¦„ (ìƒì„¸)

#### Step 1: Universal Routerì—ì„œ ìš”ì²­ ìˆ˜ì‹ 

```python
# app/routers/universal_router.py
@router.api_route("/{path:path}", methods=["GET", "POST", "PUT", "DELETE", "PATCH"])
async def handle_request(path: str, request: Request, db: AsyncSession):
    # ìš”ì²­ ê²½ë¡œì™€ ë©”ì„œë“œ ì¶”ì¶œ
    method = request.method  # "GET"
    full_path = f"/api/{path}"  # "/api/users/list"
```

ëª¨ë“  `/api/*` ê²½ë¡œë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì€ **Universal Router**ê°€ ë°›ìŠµë‹ˆë‹¤. í•˜ë“œì½”ë”©ëœ ì—”ë“œí¬ì¸íŠ¸ê°€ ì•„ë‹ˆë¼, DBì—ì„œ ë™ì ìœ¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.

#### Step 2: DBì—ì„œ API ë©”íƒ€ë°ì´í„° ì¡°íšŒ

```sql
-- ìš”ì²­ ê²½ë¡œì™€ ë©”ì„œë“œë¡œ API ì •ì˜ ê²€ìƒ‰
SELECT * FROM APP_API_ROUTE_L 
WHERE API_PATH = '/api/users/list' 
  AND HTTP_MTHD = 'GET'
  AND USE_YN = 'Y' 
  AND DEL_YN = 'N';
```

**APP_API_ROUTE_L** í…Œì´ë¸”ì—ì„œ í™œì„±í™”ëœ API ì •ì˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤.

#### Step 3: í˜„ì¬ ë²„ì „ì˜ ì‹¤í–‰ ë¡œì§ ì¡°íšŒ

```sql
-- í˜„ì¬ í™œì„± ë²„ì „ì˜ ë¡œì§ ì¡°íšŒ
SELECT * FROM APP_API_VERSION_H 
WHERE ROUTE_ID = 'route-xxx' 
  AND CRNT_YN = 'Y';
```

**APP_API_VERSION_H** í…Œì´ë¸”ì—ì„œ `CRNT_YN='Y'`ì¸ í˜„ì¬ ë²„ì „ì˜ ë¡œì§ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

#### Step 4: íŒŒë¼ë¯¸í„° ê²€ì¦

```python
# REQ_SPEC ì˜ˆì‹œ
{
    "limit": {"type": "int", "required": false, "default": 10},
    "cmpny_id": {"type": "string", "required": true}
}

# ê²€ì¦ ê³¼ì •
1. cmpny_idê°€ ì—†ìœ¼ë©´ â†’ 400 ì—ëŸ¬ ("í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½")
2. limitì´ ì—†ìœ¼ë©´ â†’ ê¸°ë³¸ê°’ 10 ì ìš©
3. limit="abc" ì´ë©´ â†’ 400 ì—ëŸ¬ ("íƒ€ì… ë¶ˆì¼ì¹˜")
4. SQL Injection íŒ¨í„´ ê²€ì‚¬ â†’ "'; DROP TABLE" ê°ì§€ ì‹œ ì°¨ë‹¨
```

#### Step 5: ë¡œì§ ì‹¤í–‰

```python
# LOGIC_TYPE: "SQL"
# LOGIC_BODY: "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id LIMIT :limit"

# ì‹¤í–‰ (íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ìœ¼ë¡œ SQL Injection ë°©ì§€)
result = await db.execute(
    text("SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id LIMIT :limit"),
    {"cmpny_id": "company-001", "limit": 10}
)
```

#### Step 6: ì‘ë‹µ ë°˜í™˜

```json
{
    "success": true,
    "data": [
        {"USER_ID": "user-001", "FIRST_NAME": "í™", "LAST_NAME": "ê¸¸ë™", ...},
        {"USER_ID": "user-002", "FIRST_NAME": "ê¹€", "LAST_NAME": "ì² ìˆ˜", ...}
    ],
    "count": 2,
    "execution_time_ms": 45.2
}
```

---

### 2ï¸âƒ£ API ìƒì„± íë¦„

ìƒˆ APIë¥¼ ë§Œë“¤ë ¤ë©´ ì½”ë“œ ë³€ê²½ ì—†ì´ **DBì— í–‰ë§Œ ì¶”ê°€**í•˜ë©´ ë©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ê´€ë¦¬ì ìš”ì²­     â”‚â”€â”€â”€â”€â–¶â”‚   Admin Router   â”‚â”€â”€â”€â”€â–¶â”‚   DBì— ì €ì¥       â”‚
â”‚  POST /admin/    â”‚     â”‚   (ê²€ì¦ + ì €ì¥)   â”‚     â”‚                  â”‚
â”‚    routes        â”‚     â”‚                  â”‚     â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APP_API_ROUTE_L (ìƒˆ í–‰ ì¶”ê°€)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ROUTE_ID: "route-new-001"                                      â”‚ â”‚
â”‚  â”‚ API_PATH: "/api/products/list"                                 â”‚ â”‚
â”‚  â”‚ HTTP_MTHD: "GET"                                               â”‚ â”‚
â”‚  â”‚ API_NAME: "ìƒí’ˆ ëª©ë¡ ì¡°íšŒ"                                      â”‚ â”‚
â”‚  â”‚ USE_YN: "Y"                                                    â”‚ â”‚
â”‚  â”‚ DEL_YN: "N"                                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APP_API_VERSION_H (ìƒˆ í–‰ ì¶”ê°€)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ VERSION_ID: "ver-new-001"                                      â”‚ â”‚
â”‚  â”‚ ROUTE_ID: "route-new-001"                                      â”‚ â”‚
â”‚  â”‚ VERSION_NO: 1                                                  â”‚ â”‚
â”‚  â”‚ CRNT_YN: "Y"  â† í˜„ì¬ í™œì„± ë²„ì „                                  â”‚ â”‚
â”‚  â”‚ LOGIC_TYPE: "SQL"                                              â”‚ â”‚
â”‚  â”‚ LOGIC_BODY: "SELECT * FROM products LIMIT :limit"              â”‚ â”‚
â”‚  â”‚ REQ_SPEC: {"limit": {"type": "int", "default": 20}}            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APP_API_AUDIT_H (ê°ì‚¬ ë¡œê·¸ ìë™ ìƒì„±)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ACTION: "CREATE"                                               â”‚ â”‚
â”‚  â”‚ ROUTE_ID: "route-new-001"                                      â”‚ â”‚
â”‚  â”‚ CREA_DT: "2026-01-09 18:30:00"                                 â”‚ â”‚
â”‚  â”‚ CHANGE_NOTE: "ì‹ ê·œ API ìƒì„±"                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥                                                   â”‚
â”‚  GET /api/products/list?limit=10                                     â”‚
â”‚  (ì„œë²„ ì¬ì‹œì‘ ë¶ˆí•„ìš”, ì½”ë“œ ë°°í¬ ë¶ˆí•„ìš”)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ ë²„ì „ ê´€ë¦¬ íë¦„

API ìˆ˜ì •ì´ í•„ìš”í•  ë•ŒëŠ” ê¸°ì¡´ ë²„ì „ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  **ìƒˆ ë²„ì „ì„ ì¶”ê°€**í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë²„ì „ ê´€ë¦¬ ì‹œë‚˜ë¦¬ì˜¤                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì´ˆê¸° ìƒíƒœ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APP_API_VERSION_H                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VERSION_NO: 1  â”‚ CRNT_YN: Y â† í™œì„±     â”‚
â”‚ LOGIC: SELECT * FROM users LIMIT 10     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”‚
                    â”‚ ìƒˆ ë²„ì „ ì¶”ê°€ (POST /admin/routes/{id}/versions)
                    â–¼

[ë²„ì „ 2 ì¶”ê°€ í›„]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APP_API_VERSION_H                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VERSION_NO: 1  â”‚ CRNT_YN: N â† ë¹„í™œì„±   â”‚  â† ê¸°ì¡´ ë²„ì „ ë³´ì¡´
â”‚ LOGIC: SELECT * FROM users LIMIT 10     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VERSION_NO: 2  â”‚ CRNT_YN: Y â† í™œì„±     â”‚  â† ìƒˆ ë²„ì „ì´ í˜„ì¬ ë²„ì „
â”‚ LOGIC: SELECT * FROM users              â”‚
â”‚        WHERE del_yn='N' LIMIT 10        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”‚
                    â”‚ ë¬¸ì œ ë°œìƒ! ë¡¤ë°± í•„ìš” (PATCH /admin/routes/{id}/versions/1/activate)
                    â–¼

[ë²„ì „ 1ë¡œ ë¡¤ë°±]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APP_API_VERSION_H                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VERSION_NO: 1  â”‚ CRNT_YN: Y â† í™œì„±     â”‚  â† ì¦‰ì‹œ ë¡¤ë°± ì™„ë£Œ!
â”‚ LOGIC: SELECT * FROM users LIMIT 10     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VERSION_NO: 2  â”‚ CRNT_YN: N â† ë¹„í™œì„±   â”‚
â”‚ LOGIC: SELECT * FROM users              â”‚
â”‚        WHERE del_yn='N' LIMIT 10        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- ê¸°ì¡´ ë²„ì „ì€ **ì ˆëŒ€ ìˆ˜ì •/ì‚­ì œë˜ì§€ ì•ŠìŒ** (Immutable)
- ìƒˆ ë²„ì „ ì¶”ê°€ ì‹œ ìë™ìœ¼ë¡œ `CRNT_YN='Y'` ì„¤ì •
- ë¡¤ë°±ì€ `CRNT_YN` í”Œë˜ê·¸ë§Œ ë³€ê²½í•˜ë©´ **ì¦‰ì‹œ ì ìš©**
- ëª¨ë“  ë²„ì „ ë³€ê²½ì€ `APP_API_AUDIT_H`ì— ìë™ ê¸°ë¡

---

### 4ï¸âƒ£ ë¡œì§ íƒ€ì…ë³„ ì‹¤í–‰ ë°©ì‹

#### SQL (ë‹¨ì¼ ì¿¼ë¦¬)
```python
# LOGIC_BODY: "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id"
# íŒŒë¼ë¯¸í„°: {"cmpny_id": "company-001"}

result = await db.execute(text(logic_body), params)
return [dict(row) for row in result.fetchall()]
```

#### MULTI_SQL (ë‹¤ì¤‘ ì¿¼ë¦¬)
```python
# LOGIC_BODY:
{
    "queries": [
        {"name": "company", "sql": "SELECT * FROM APP_CMPNY_L WHERE CMPNY_ID = :cmpny_id"},
        {"name": "users", "sql": "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id"},
        {"name": "projects", "sql": "SELECT COUNT(*) as cnt FROM APP_PROJ_L WHERE CMPNY_ID = :cmpny_id"}
    ]
}

# ì‹¤í–‰ ê²°ê³¼:
{
    "company": {...},
    "users": [...],
    "projects": {"cnt": 15}
}
```

#### PIPELINE (íŒŒì´í”„ë¼ì¸)
```python
# LOGIC_BODY:
{
    "steps": [
        {"type": "SQL", "body": "SELECT COUNT(*) as total FROM APP_USER_L", "output": "user_count"},
        {"type": "SQL", "body": "SELECT COUNT(*) as total FROM APP_PROJ_L", "output": "proj_count"},
        {"type": "PYTHON_EXPR", "body": "$user_count.total + $proj_count.total", "output": "total"}
    ]
}

# Step 1 ì‹¤í–‰ â†’ user_count = {"total": 100}
# Step 2 ì‹¤í–‰ â†’ proj_count = {"total": 50}
# Step 3 ì‹¤í–‰ â†’ total = 150 (ì´ì „ ê²°ê³¼ ì°¸ì¡°)
```

#### HTTP_CALL (ì™¸ë¶€ API)
```python
# LOGIC_BODY:
{
    "url": "https://api.external.com/data",
    "method": "GET",
    "headers": {"Authorization": "Bearer $params.token"},
    "timeout": 30
}

# ì™¸ë¶€ API í˜¸ì¶œ í›„ ì‘ë‹µ ë°˜í™˜
async with httpx.AsyncClient() as client:
    response = await client.request(method, url, headers=headers)
    return response.json()
```

---

### 5ï¸âƒ£ LLM ê¸°ë°˜ API ìë™ ìƒì„± íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LLM API ìƒì„± í”„ë¡œì„¸ìŠ¤                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1ë‹¨ê³„: í…Œì´ë¸” ì„ íƒ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì: APP_USER_L, APP_CMPNY_L ì„ íƒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[2ë‹¨ê³„: ìŠ¤í‚¤ë§ˆ ì •ë³´ ìˆ˜ì§‘]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /schema/tables/APP_USER_L                                               â”‚
â”‚ {                                                                           â”‚
â”‚   "columns": [                                                              â”‚
â”‚     {"name": "USER_ID", "type": "VARCHAR(50)", "key": "PRI"},              â”‚
â”‚     {"name": "CMPNY_ID", "type": "VARCHAR(50)", "key": "MUL"},             â”‚
â”‚     {"name": "FIRST_NAME", "type": "VARCHAR(100)"},                        â”‚
â”‚     ...                                                                     â”‚
â”‚   ],                                                                        â”‚
â”‚   "indexes": [{"name": "IX_CMPNY_ID", "columns": ["CMPNY_ID"]}],           â”‚
â”‚   "sample_data": [{"USER_ID": "user-001", "FIRST_NAME": "í™", ...}]        â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[3ë‹¨ê³„: ìì—°ì–´ ì˜ë„ ì…ë ¥]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì: "íšŒì‚¬ë³„ ì‚¬ìš©ì ìˆ˜ë¥¼ ì¡°íšŒí•˜ëŠ”    â”‚
â”‚         APIë¥¼ ë§Œë“¤ì–´ì¤˜"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[4ë‹¨ê³„: LLM í”„ë¡¬í”„íŠ¸ ìƒì„±]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸:                                                            â”‚
â”‚ "ë‹¹ì‹ ì€ API ì„¤ê³„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ì°¸ê³ í•˜ì—¬                â”‚
â”‚  ì‚¬ìš©ìì˜ ìš”ì²­ì— ë§ëŠ” API ì •ì˜ë¥¼ JSONìœ¼ë¡œ ìƒì„±í•˜ì„¸ìš”."                      â”‚
â”‚                                                                             â”‚
â”‚ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ:                                                              â”‚
â”‚ - APP_USER_L: USER_ID(PK), CMPNY_ID(FK), FIRST_NAME, ...                   â”‚
â”‚ - APP_CMPNY_L: CMPNY_ID(PK), CMPNY_NAME, ...                               â”‚
â”‚                                                                             â”‚
â”‚ ì‚¬ìš©ì ìš”ì²­: "íšŒì‚¬ë³„ ì‚¬ìš©ì ìˆ˜ë¥¼ ì¡°íšŒí•˜ëŠ” APIë¥¼ ë§Œë“¤ì–´ì¤˜"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[5ë‹¨ê³„: Vertex AI Gemini í˜¸ì¶œ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST https://vertex-ai.googleapis.com/v1/...                                â”‚
â”‚ Authorization: Bearer (gcloud-key.json)                                     â”‚
â”‚ Model: gemini-2.5-flash                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[6ë‹¨ê³„: LLM ì‘ë‹µ (API ì •ì˜)]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                                                           â”‚
â”‚   "path": "/api/stats/users-by-company",                                   â”‚
â”‚   "method": "GET",                                                          â”‚
â”‚   "name": "íšŒì‚¬ë³„ ì‚¬ìš©ì ìˆ˜ ì¡°íšŒ",                                          â”‚
â”‚   "description": "ê° íšŒì‚¬ë³„ë¡œ ë“±ë¡ëœ ì‚¬ìš©ì ìˆ˜ë¥¼ ì§‘ê³„í•©ë‹ˆë‹¤",               â”‚
â”‚   "logic_type": "SQL",                                                      â”‚
â”‚   "logic_body": "SELECT c.CMPNY_NAME, COUNT(u.USER_ID) as user_count       â”‚
â”‚                  FROM APP_CMPNY_L c                                         â”‚
â”‚                  LEFT JOIN APP_USER_L u ON c.CMPNY_ID = u.CMPNY_ID         â”‚
â”‚                  WHERE c.DEL_YN = 'N'                                       â”‚
â”‚                  GROUP BY c.CMPNY_ID, c.CMPNY_NAME                          â”‚
â”‚                  ORDER BY user_count DESC                                   â”‚
â”‚                  LIMIT :limit",                                             â”‚
â”‚   "request_spec": {                                                         â”‚
â”‚     "limit": {"type": "int", "required": false, "default": 10}             â”‚
â”‚   }                                                                         â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[7ë‹¨ê³„: SQL í…ŒìŠ¤íŠ¸ ì‹¤í–‰]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /schema/test-sql                                                       â”‚
â”‚ ìƒì„±ëœ SQLì„ ì‹¤ì œ DBì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰                                        â”‚
â”‚ â†’ ì„±ê³µ ì‹œ: "âœ… í…ŒìŠ¤íŠ¸ í†µê³¼ (5ê±´ ì¡°íšŒ, 32ms)"                               â”‚
â”‚ â†’ ì‹¤íŒ¨ ì‹œ: "âŒ ë¬¸ë²• ì˜¤ë¥˜: Unknown column..."                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
[8ë‹¨ê³„: API ë“±ë¡]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í…ŒìŠ¤íŠ¸ í†µê³¼ í›„ "API ìƒì„±" ë²„íŠ¼ í´ë¦­                                         â”‚
â”‚ â†’ APP_API_ROUTE_Lì— ìƒˆ í–‰ ì¶”ê°€                                              â”‚
â”‚ â†’ APP_API_VERSION_Hì— ìƒˆ í–‰ ì¶”ê°€                                            â”‚
â”‚ â†’ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥: GET /api/stats/users-by-company                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6ï¸âƒ£ ìì—°ì–´ SQL ì¿¼ë¦¬ ì‹¤í–‰ íë¦„

```
ì‚¬ìš©ì ì§ˆë¬¸: "ìµœê·¼ ê°€ì…í•œ ì‚¬ìš©ì 5ëª… ë³´ì—¬ì¤˜"
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ë³´ì•ˆ ê²€ì‚¬ 1ë‹¨ê³„] ì•…ì˜ì  ì˜ë„ ê²€ì‚¬                                          â”‚
â”‚ check_question_intent()                                                      â”‚
â”‚ - "ì‚­ì œí•´ì¤˜", "í•´í‚¹", "ë¹„ë°€ë²ˆí˜¸" ë“± ìœ„í—˜ í‚¤ì›Œë“œ ê°ì§€                        â”‚
â”‚ â†’ í†µê³¼ âœ“                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [SQL ìƒì„±] LLMì´ ìì—°ì–´ â†’ SQL ë³€í™˜                                          â”‚
â”‚ generate_sql_from_natural_language()                                         â”‚
â”‚                                                                             â”‚
â”‚ ìƒì„±ëœ SQL:                                                                 â”‚
â”‚ SELECT USER_ID, FIRST_NAME, LAST_NAME, CREA_DT                              â”‚
â”‚ FROM APP_USER_L                                                             â”‚
â”‚ WHERE DEL_YN = 'N'                                                          â”‚
â”‚ ORDER BY CREA_DT DESC                                                       â”‚
â”‚ LIMIT 5                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ë³´ì•ˆ ê²€ì‚¬ 2ë‹¨ê³„] SQL ë³´ì•ˆ ë¶„ì„                                             â”‚
â”‚ check_sql_security()                                                         â”‚
â”‚ - DDL ëª…ë ¹ì–´ (DROP, CREATE, ALTER) ê²€ì‚¬ â†’ ì—†ìŒ âœ“                           â”‚
â”‚ - DML ëª…ë ¹ì–´ (INSERT, UPDATE, DELETE) ê²€ì‚¬ â†’ ì—†ìŒ âœ“                        â”‚
â”‚ - SQL Injection íŒ¨í„´ ê²€ì‚¬ â†’ ì—†ìŒ âœ“                                         â”‚
â”‚ - ë¯¼ê° ì»¬ëŸ¼ (PASSWORD, TOKEN) ì ‘ê·¼ ê²€ì‚¬ â†’ ì—†ìŒ âœ“                           â”‚
â”‚ - LIMIT ì¡´ì¬ í™•ì¸ â†’ ìˆìŒ âœ“                                                 â”‚
â”‚ â†’ ê²°ê³¼: SAFE                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [SQL ì •ì œ] sanitize_sql_query()                                             â”‚
â”‚ - SELECT ë¬¸ë§Œ í—ˆìš© í™•ì¸                                                     â”‚
â”‚ - LIMIT ê°’ì´ max_results ì´ˆê³¼ ì‹œ ì¡°ì •                                       â”‚
â”‚ - ì£¼ì„ ì œê±°, ì •ê·œí™”                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì‹¤í–‰] auto_execute=true ì‹œ ì¿¼ë¦¬ ì‹¤í–‰                                       â”‚
â”‚                                                                             â”‚
â”‚ ê²°ê³¼:                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ USER_ID       â”‚ FIRST_NAME â”‚ LAST_NAME â”‚ CREA_DT             â”‚           â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚ â”‚ user-001      â”‚ ê¹€         â”‚ ê¸°ì—°      â”‚ 2026-01-09 10:00:00 â”‚           â”‚
â”‚ â”‚ user-002      â”‚ ìµœ         â”‚ ì¤€í˜      â”‚ 2026-01-08 15:30:00 â”‚           â”‚
â”‚ â”‚ ...           â”‚            â”‚           â”‚                     â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
prompt-api-engine/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/           # í•µì‹¬ ì„¤ì • (config, database)
â”‚   â”œâ”€â”€ models/         # SQLAlchemy ëª¨ë¸
â”‚   â”œâ”€â”€ routers/        # FastAPI ë¼ìš°í„°
â”‚   â”œâ”€â”€ schemas/        # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ services/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (Executor, Validator)
â”‚   â””â”€â”€ main.py         # ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”œâ”€â”€ scripts/            # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ CHANGELOG.md
â””â”€â”€ README.md
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. í™˜ê²½ ì„¤ì •

```powershell
# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
.\venv\Scripts\Activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# BigQuery ì‚¬ìš© ì‹œ (ì„ íƒ)
pip install google-cloud-bigquery
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì— ë‹¤ìŒ ì„¤ì • ì¶”ê°€:

```env
# MySQL
MYSQL_HOST=localhost
MYSQL_USER=root
MYSQL_PASSWORD=password
MYSQL_DB=cliwant
MYSQL_PORT=3306

# ê´€ë¦¬ì API í‚¤
API_KEY=your-admin-api-key

# BigQuery (ì„ íƒ)
GCP_PROJECT_ID=your-project-id
GCP_CREDENTIALS_PATH=gcloud-key.json

# OpenSearch (ì„ íƒ)
OPENSEARCH_HOST=https://localhost:9200
OPENSEARCH_USER=admin
OPENSEARCH_PASSWORD=admin
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```powershell
# í…Œì´ë¸” ìƒì„±
python scripts/create_tables.py

# ìƒ˜í”Œ API ìƒì„± (30ê°œ)
python scripts/insert_sample_apis.py
```

### 4. ì„œë²„ ì‹¤í–‰

```powershell
uvicorn app.main:app --reload
```

**ì ‘ì† URL:**
| URL | ì„¤ëª… |
|-----|------|
| http://localhost:8000 | API Tester UI (ë©”ì¸) |
| http://localhost:8000/docs | Swagger UI |
| http://localhost:8000/redoc | ReDoc |
| http://localhost:8000/admin/policy | Immutable ì •ì±… ì¡°íšŒ |

## ğŸ“ ì§€ì› ë¡œì§ íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `SQL` | ë‹¨ì¼ MySQL ì¿¼ë¦¬ | `SELECT * FROM users WHERE id = :id` |
| `MULTI_SQL` | ë‹¤ì¤‘ ì¿¼ë¦¬ ìˆœì°¨ ì‹¤í–‰ | ì—¬ëŸ¬ í…Œì´ë¸” ì¡°ì¸ ê²°ê³¼ ì¡°í•© |
| `PIPELINE` | ì—¬ëŸ¬ ë¡œì§ íŒŒì´í”„ë¼ì¸ ì—°ê²° | SQL â†’ ë³€í™˜ â†’ ì‘ë‹µ |
| `BIGQUERY` | Google BigQuery ì¿¼ë¦¬ | ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¶„ì„ |
| `OPENSEARCH` | OpenSearch ê²€ìƒ‰ ì¿¼ë¦¬ | ì „ë¬¸ ê²€ìƒ‰, ë¡œê·¸ ë¶„ì„ |
| `PYTHON_EXPR` | Python í‘œí˜„ì‹ (ì œí•œì ) | ê°„ë‹¨í•œ ë°ì´í„° ë³€í™˜ |
| `HTTP_CALL` | ì™¸ë¶€ API í˜¸ì¶œ | íƒ€ ì„œë¹„ìŠ¤ ì—°ë™ |
| `STATIC_RESPONSE` | ì •ì  JSON ì‘ë‹µ | ëª©ì—…, í…ŒìŠ¤íŠ¸ìš© |

## ğŸ—„ï¸ DB í…Œì´ë¸” êµ¬ì¡°

### APP_API_ROUTE_L (API ì¹´íƒˆë¡œê·¸)

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| ROUTE_ID | VARCHAR(50) | PK |
| API_PATH | VARCHAR(255) | API ê²½ë¡œ |
| HTTP_MTHD | VARCHAR(10) | HTTP ë©”ì„œë“œ |
| API_NAME | VARCHAR(255) | API ì´ë¦„ |
| USE_YN | CHAR(1) | ì‚¬ìš© ì—¬ë¶€ (Y/N) |
| DEL_YN | CHAR(1) | ì‚­ì œ ì—¬ë¶€ (Y/N) |

### APP_API_VERSION_H (ì‹¤ì œ ë™ì‘ ë¡œì§)

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| VERSION_ID | VARCHAR(50) | PK |
| ROUTE_ID | VARCHAR(50) | FK â†’ APP_API_ROUTE_L |
| VERSION_NO | INT | ë²„ì „ ë²ˆí˜¸ |
| CRNT_YN | CHAR(1) | í˜„ì¬ ë²„ì „ ì—¬ë¶€ |
| REQ_SPEC | JSON | ì…ë ¥ íŒŒë¼ë¯¸í„° ê²€ì¦ ê·œì¹™ |
| LOGIC_TYPE | VARCHAR(50) | ë¡œì§ íƒ€ì… |
| LOGIC_BODY | TEXT | ì‹¤í–‰í•  ë¡œì§ |
| RESP_SPEC | JSON | ì‘ë‹µ ë§¤í•‘ ê·œì¹™ |

## ğŸ“– API ì‚¬ìš© ì˜ˆì‹œ

### ë‹¨ì¼ SQL ì¿¼ë¦¬

```json
{
  "logic_type": "SQL",
  "logic_body": "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id",
  "request_spec": {
    "cmpny_id": {"type": "string", "required": true}
  }
}
```

### ë‹¤ì¤‘ SQL ì¿¼ë¦¬ (MULTI_SQL)

```json
{
  "logic_type": "MULTI_SQL",
  "logic_body": {
    "queries": [
      {"name": "users", "sql": "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id"},
      {"name": "company", "sql": "SELECT * FROM APP_CMPNY_L WHERE CMPNY_ID = :cmpny_id"}
    ]
  }
}
```

### íŒŒì´í”„ë¼ì¸ (PIPELINE)

```json
{
  "logic_type": "PIPELINE",
  "logic_body": {
    "steps": [
      {"type": "SQL", "body": "SELECT COUNT(*) as cnt FROM APP_USER_L", "output": "user_count"},
      {"type": "STATIC_RESPONSE", "body": "{\"total_users\": $params.user_count}"}
    ]
  }
}
```

### BigQuery

```json
{
  "logic_type": "BIGQUERY",
  "logic_body": "SELECT * FROM `project.dataset.table` WHERE date = @date LIMIT @limit",
  "request_spec": {
    "date": {"type": "string", "required": true},
    "limit": {"type": "int", "default": 100}
  }
}
```

### OpenSearch

```json
{
  "logic_type": "OPENSEARCH",
  "logic_body": {
    "index": "logs-*",
    "body": {
      "query": {"match": {"message": "$params.keyword"}},
      "size": 100
    }
  }
}
```

## ğŸ§  AI ê¸°ëŠ¥ (v1.8.0+)

Vertex AI Gemini 2.5/3.0ì„ í™œìš©í•œ ê°•ë ¥í•œ AI ê¸°ëŠ¥ë“¤:

### ğŸ’¬ ìì—°ì–´ API í˜¸ì¶œ

ìì—°ì–´ë¡œ ì§ˆë¬¸í•˜ë©´ AIê°€ ì í•©í•œ APIë¥¼ ì°¾ì•„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
POST /schema/ai/chat

{
  "question": "ìµœê·¼ ê°€ì…í•œ ì‚¬ìš©ì 10ëª… ë³´ì—¬ì¤˜",
  "auto_execute": true,
  "model": "vertex_ai/gemini-2.5-flash"
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
- ì„ íƒëœ API: `GET /api/users/list`
- ì¶”ì¶œëœ íŒŒë¼ë¯¸í„°: `{"limit": 10}`
- ì‹ ë¢°ë„: 95%
- ìë™ ì‹¤í–‰ ê²°ê³¼ í¬í•¨

### ğŸ”§ SQL ìµœì í™” ì œì•ˆ

SQL ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ ì„±ëŠ¥ ê°œì„  ë°©ì•ˆì„ ì œì•ˆí•©ë‹ˆë‹¤.

```bash
POST /schema/ai/optimize-sql

{
  "sql_query": "SELECT * FROM APP_USER_L WHERE CMPNY_ID = :cmpny_id",
  "table_names": ["APP_USER_L"],
  "execution_time_ms": 500,
  "model": "vertex_ai/gemini-2.5-flash"
}
```

**ì œì•ˆ í•­ëª©:**
- ì¸ë±ìŠ¤ í™œìš© ìµœì í™”
- ì¿¼ë¦¬ ì¬ì‘ì„± ì¶”ì²œ
- JOIN ìˆœì„œ ìµœì í™”
- ìƒˆ ì¸ë±ìŠ¤ ìƒì„± ê¶Œì¥

### ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìë™ ìƒì„±

API ì •ì˜ë¥¼ ë¶„ì„í•˜ì—¬ í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
POST /schema/ai/generate-test-cases

{
  "route_id": "api-route-id",
  "model": "vertex_ai/gemini-2.5-flash"
}
```

**ìƒì„± ì¼€ì´ìŠ¤ ìœ í˜•:**
| ìœ í˜• | ì„¤ëª… | ìµœì†Œ ê°œìˆ˜ |
|------|------|----------|
| Positive | ì •ìƒ ë™ì‘ ì¼€ì´ìŠ¤ | 3ê°œ |
| Negative | ì—ëŸ¬ ì¼€ì´ìŠ¤ (í•„ìˆ˜ê°’ ëˆ„ë½ ë“±) | 2ê°œ |
| Boundary | ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ | 2ê°œ |
| Performance | ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ | 1ê°œ |

---

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **Immutable ì •ì±…** | API ì •ì˜ëŠ” ì¶”ê°€ë§Œ ê°€ëŠ¥, ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€ |
| **SQL Injection ë°©ì§€** | DROP, TRUNCATE ë“± ìœ„í—˜ í‚¤ì›Œë“œ ì°¨ë‹¨, íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ê°•ì œ |
| **ê°ì‚¬ ë¡œê·¸** | ëª¨ë“  ë³€ê²½ ì´ë ¥ ê¸°ë¡ (ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„) |
| **ë²„ì „ ê´€ë¦¬** | ê¸°ì¡´ ë²„ì „ ë³´ì¡´, ì–¸ì œë“  ì´ì „ ë²„ì „ìœ¼ë¡œ ì „í™˜ ê°€ëŠ¥ |
| **API í‚¤ ì¸ì¦** | ê´€ë¦¬ì API ì ‘ê·¼ ì œì–´ |

### âš ï¸ ë³´ì•ˆ ì§„ë‹¨ ë³´ê³ ì„œ

ìì—°ì–´ SQL ì¿¼ë¦¬ ìƒì„± ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ë³´ì•ˆ ë¶„ì„ì€ **[SECURITY_ASSESSMENT.md](./SECURITY_ASSESSMENT.md)** ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

**ì£¼ìš” ê¶Œê³ ì‚¬í•­:**
| ìš°ì„ ìˆœìœ„ | í•­ëª© | ìƒíƒœ |
|----------|------|------|
| ğŸ”´ P0 | ì¸ì¦/ê¶Œí•œ ì‹œìŠ¤í…œ ì¶”ê°€ | ê°œì„  í•„ìš” |
| ğŸ”´ P0 | ì½ê¸° ì „ìš© DB ì‚¬ìš©ì ë¶„ë¦¬ | ê°œì„  í•„ìš” |
| ğŸ”´ P0 | CORS ì„¤ì • ê°•í™” | ê°œì„  í•„ìš” |
| ğŸŸ  P1 | ë¯¼ê° ì»¬ëŸ¼ ì„œë²„ ì¸¡ ê²€ì¦ | ê°œì„  ê¶Œì¥ |
| ğŸŸ  P1 | Prompt Injection ë°©ì–´ | ê°œì„  ê¶Œì¥ |
| ğŸŸ¡ P2 | Rate Limiting | ê°œì„  ê¶Œì¥ |
| ğŸŸ¡ P2 | ê°ì‚¬ ë¡œê·¸ ê°•í™” | ê°œì„  ê¶Œì¥ |

> âš ï¸ **í”„ë¡œë•ì…˜ ë°°í¬ ì „ ìµœì†Œí•œ P0 í•­ëª©ë“¤ì„ í•´ê²°í•˜ì„¸ìš”.**

### ğŸ”’ Immutable ì •ì±…

API ì •ì˜ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ **ì¶”ê°€ ì „ìš©(Append-only)** ì •ì±…ì„ ì ìš©í•©ë‹ˆë‹¤:

| ë¦¬ì†ŒìŠ¤ | í—ˆìš© ì‘ì—… | ê¸ˆì§€ ì‘ì—… |
|--------|----------|----------|
| `APP_API_ROUTE_L` | CREATE, ACTIVATE, DEACTIVATE | UPDATE, DELETE |
| `APP_API_VERSION_H` | CREATE, SET_CURRENT | UPDATE, DELETE |
| `APP_API_AUDIT_H` | CREATE (ìë™) | UPDATE, DELETE |

**ì¥ì :**
- âœ… ì‹¤ìˆ˜ë¡œ ì¸í•œ API ì‚­ì œ ì™„ì „ ë°©ì§€
- âœ… ëª¨ë“  ë³€ê²½ ì´ë ¥ ì˜êµ¬ ë³´ì¡´
- âœ… ì–¸ì œë“  ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ì „í™˜
- âœ… ê°ì‚¬ ì¶”ì  ìš©ì´

## ğŸ”§ ê´€ë¦¬ì API (Immutable)

âš ï¸ **ì£¼ì˜**: API ì •ì˜ëŠ” ì¶”ê°€ë§Œ ê°€ëŠ¥í•˜ë©° ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```bash
# API ëª©ë¡ ì¡°íšŒ (ê³µê°œ)
curl http://localhost:8000/admin/routes

# ìƒˆ API ìƒì„± (API í‚¤ í•„ìš”)
curl -X POST http://localhost:8000/admin/routes \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"path": "my-api", "method": "GET", "name": "My API"}'

# ìƒˆ ë²„ì „ ìƒì„± (API í‚¤ í•„ìš”)
curl -X POST http://localhost:8000/admin/routes/{route_id}/versions \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "logic_type": "SQL",
    "logic_body": "SELECT * FROM users LIMIT :limit",
    "request_spec": {"limit": {"type": "int", "default": 10}},
    "change_note": "ì´ˆê¸° ë²„ì „"
  }'

# ìƒíƒœ ë³€ê²½ (í™œì„±í™”/ë¹„í™œì„±í™”ë§Œ ê°€ëŠ¥)
curl -X PATCH http://localhost:8000/admin/routes/{route_id}/status \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"is_active": false, "reason": "ì„ì‹œ ë¹„í™œì„±í™”"}'

# í˜„ì¬ ë²„ì „ ë³€ê²½
curl -X PATCH http://localhost:8000/admin/routes/{route_id}/versions/1/activate \
  -H "X-API-Key: your-api-key"

# ì •ì±… ì¡°íšŒ
curl http://localhost:8000/admin/policy
```

## ğŸ“Š í¬í•¨ëœ ìƒ˜í”Œ API (33ê°œ)

| ì¹´í…Œê³ ë¦¬ | API ìˆ˜ | ì˜ˆì‹œ |
|----------|--------|------|
| ì‚¬ìš©ì | 3 | `/api/users/list`, `/api/users/by-company` |
| íšŒì‚¬ | 3 | `/api/companies/list`, `/api/companies/by-bizno` |
| í”„ë¡œì íŠ¸ | 6 | `/api/projects/recent`, `/api/projects/active` |
| ì‚¬ì „ê·œê²© | 3 | `/api/prcr-projects/recent` |
| ê³„ì•½ | 4 | `/api/contracts/recent`, `/api/contracts/by-bizno` |
| ì…ì°°ê³„íš | 3 | `/api/bid-plans/by-year` |
| ë©´í—ˆ | 2 | `/api/licenses/by-bizno` |
| ê²€ìƒ‰ | 1 | `/api/searches/list` |
| ë°œì£¼ê¸°ê´€ | 2 | `/api/clients/list` |
| ë‹¤ì¤‘ì¿¼ë¦¬ | 2 | `/api/company/dashboard` |
| í†µê³„ | 1 | `/api/stats/projects-by-type` |
| ê¸°ë³¸ | 3 | `/api/hello`, `/api/echo`, `/api/users` |

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License
